<template>
  <div class="list">
    <list-header @handleSave="submit"></list-header>
    <list-form
      @newItem="getItem"
      :itemId="itemId"
    ></list-form>
  </div>
</template>

<script>
import ListHeader from './components/Header'
import ListForm from './components/Form'
export default {
  data () {
    return {
      newItem: {},
      itemId: ''
    }
  },
  methods: {
    // æ¥æ”¶ Form å­ç»„ä»¶çš„ä¼ å€¼
    getItem (parameter) {
      this.newItem = parameter
    },
    // æäº¤æ•°æ®äº†,å‘é¦–é¡µè·¯ç”±ä¼ å€¼
    submit () {
      // åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ•°æ®
      if (this.newItem.title && this.newItem.timeStampStart && this.newItem.timeStampEnd) {
        this.$router.push({
          name: 'Home',
          query: {
            newItem: this.newItem
          }
        })
      } else {
        alert('è°ƒçš®ï¼Œä»»åŠ¡éƒ½æ²¡æœ‰å†™å®Œæ•´ä¹Ÿè¦è®©äººå®¶æäº¤ğŸ™„ğŸ™„')
      }
    },
    // è·å–å‚æ•°
    getData () {
      this.itemId = this.$route.query.itemId
    }
  },
  components: {
    ListHeader,
    ListForm
  },
  mounted () {
    this.getData()
  }
}
</script>

<style lang="stylus" scoped>

</style>
